webpackJsonp([19],{232:function(n,t,a){"use strict";function e(n){d||a(843)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(443),s=a.n(i);for(var o in i)"default"!==o&&function(n){a.d(t,n,function(){return i[n]})}(o);var r=a(845),p=a.n(r),d=!1,l=a(1),c=e,f=l(s.a,p.a,!1,c,null,null);f.options.__file="src\\views\\note\\month\\task_detail.vue",t.default=f.exports},443:function(n,t,a){"use strict";function e(){for(var n=(0,s.default)(".detailsRange").length,t=0;t<n;t++){(0,s.default)(".detailsRange").eq(t).find(".span").length||(0,s.default)(".detailsRange").eq(t).hide()}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(84),s=function(n){return n&&n.__esModule?n:{default:n}}(i);t.default={data:function(){return{formData:{mark:[],isMark:[],staffId:[],appraise:[],introduce:[]},markRange:[{min:96,max:100,appraise:"优秀",introduce:"A",staffs:[],active:"activeSuccess"},{min:90,max:95.9,appraise:"优良",introduce:"B",staffs:[]},{min:80,max:89.9,appraise:"合格",introduce:"C",staffs:[]},{min:60,max:79.9,appraise:"不足",introduce:"D",staffs:[],active:"activeError"},{min:1,max:59.9,appraise:"不合格",introduce:"E",staffs:[],active:"activeError"},{min:0,max:0,appraise:"未评价",introduce:"无",staffs:[]}],loading:!1,date:"",tasks:[],tasksCopy:[],taskNames:[],staffs:[],users:[],type:!0,task:""}},methods:{excelNoteMark:function(n){var t=this.date;"mark"===n?window.open("/api/note/excel?date="+t):"staff"===n&&window.open("/api/note/staff_excel?date="+t)},selectTask:function(n){var t=this;this.tasks.forEach(function(a,e){"-1"===n?t.$set(a,"is_task",!1):a.task_id===n?t.$set(a,"is_task",!1):t.$set(a,"is_task",!0)})},goBack:function(){this.$router.push({name:"note-month"})},routeType:function(){this.$router.push({name:"note_staff_detail",query:{date:this.date}})},init:function(){var n=this;this.date=this.$route.query.date,this.date?this.JAjax.postJson("note/task/date",{date:this.date},function(t){n.tasks=t.data||[],n.tasksCopy=t.data||[],n.tasks.forEach(function(t){t.staffs.forEach(function(a){n.markRange.forEach(function(e){if(e.min<=a.mark&&a.mark<=e.max){var i=e.staffs[t.task_id]||[];i.push(a),n.$set(e.staffs,t.task_id,i)}})})}),n.staffs=t.staffs||[],n.taskNames=t.tasks||[],n.users=t.users||[]}):this.$Message.error("未选择时间")}},updated:function(){e()},mounted:function(){this.init()}}},843:function(n,t,a){var e=a(844);"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);a(15)("505e89be",e,!1,{})},844:function(n,t,a){t=n.exports=a(14)(!1),t.push([n.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.dragging-tip-enter-active {\n  opacity: 1;\n  transition: opacity .3s;\n}\n.dragging-tip-enter,\n.dragging-tip-leave-to {\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n.dragging-tip-con {\n  display: block;\n  text-align: center;\n  width: 100%;\n  height: 50px;\n}\n.dragging-tip-con span {\n  font-size: 18px;\n}\n.record-tip-con {\n  display: block;\n  width: 100%;\n  height: 292px;\n  overflow: auto;\n}\n.record-item {\n  box-sizing: content-box;\n  display: block;\n  overflow: hidden;\n  height: 24px;\n  line-height: 24px;\n  padding: 8px 10px;\n  border-bottom: 1px dashed gainsboro;\n}\n.record-tip-con span {\n  font-size: 14px;\n}\n.edittable-test-con {\n  height: 160px;\n}\n.edittable-table-height-con {\n  height: 190px;\n}\n.edittable-con-1 {\n  box-sizing: content-box;\n  padding: 15px 0 0;\n  height: 196px;\n}\n.edittable-table-get-currentdata-con {\n  height: 190px !important;\n}\n.exportable-table-download-con1 {\n  padding: 16px 0 16px 20px;\n  border-bottom: 1px dashed #c3c3c3;\n  margin-bottom: 16px;\n}\n.exportable-table-download-con2 {\n  padding-left: 20px;\n}\n.show-image {\n  padding: 20px 0px;\n}\n.show-image img {\n  display: block;\n  width: 100%;\n  height: auto;\n}\n.searchable-table-con1 {\n  height: 230px !important;\n}\n.ivu-form-item-error-tip {\n  width: 200px;\n}\n.clear {\n  clear: both;\n}\n.title {\n  text-align: center;\n  font-weight: bold;\n  height: 50px;\n  line-height: 50px;\n  padding-left: 30px;\n  margin: -10px 0 10px 0;\n  background: #e6e6e6;\n}\n.depart {\n  text-align: center;\n  font-weight: bold;\n  height: 30;\n  line-height: 30px;\n  padding-left: 30px;\n  margin: -10px 0 10px 0;\n  background: #f4f4f4;\n}\n.departs {\n  margin-top: 10px;\n  clear: both;\n}\n.departs .staff {\n  width: 15%;\n  float: left;\n  position: relative;\n  text-align: center;\n  background: #d7d7d7;\n  margin-right: 1%;\n}\n.departs .staff div {\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  -webkit-transform: translateY(-50%);\n          transform: translateY(-50%);\n  top: 50%;\n}\n.departs .staff span {\n  display: block;\n  height: 20px;\n}\n.departs .tasks {\n  min-height: 60px;\n  width: 84%;\n  float: left;\n}\n.departs .tasks .task:after {\n  content: '';\n  display: block;\n  clear: both;\n}\n.departs .tasks .task {\n  width: 100%;\n  line-height: 50px;\n  margin-bottom: 10px;\n}\n.departs .tasks .task:first-child {\n  margin-top: 20px;\n}\n.departs .tasks .task .appraise {\n  width: 6%;\n  float: left;\n  text-align: center;\n  background: #d7d7d7;\n}\n.departs .tasks .task .introduce {\n  border: 1px #999 solid;\n  margin-top: -1px;\n  width: 94%;\n  float: left;\n  padding-left: 10px;\n}\n.departs .tasks .task .introduce span {\n  display: inline-block;\n  height: 30px;\n  line-height: 30px;\n  background: #f4f4f4;\n  padding-left: 10px;\n  margin-right: 10px;\n}\n.details {\n  clear: both;\n  border: 1px #666666 solid;\n  border-top: none;\n  margin-top: -10px;\n  padding: 5px 10px;\n}\n.details > div {\n  margin-bottom: 10px;\n  line-height: 60px;\n  border: 1px #666666 solid;\n}\n.details > div .markRange {\n  display: inline-block;\n  width: 100px;\n  text-align: center;\n  background: #d7d7d7;\n  position: relative;\n  top: -1px;\n  left: -1px;\n}\n.details > div .span {\n  height: 35px;\n  line-height: 35px;\n  padding: 0 10px;\n  background: #f2f2f2;\n  margin: auto auto;\n  display: inline-block;\n  margin-left: 10px;\n}\nform .staff {\n  text-align: center;\n  line-height: 40px;\n  background: #f4f4f4;\n}\n.active {\n  background: #80cbfa;\n}\n.activeSuccess {\n  color: green;\n}\n.activeError {\n  color: red;\n}\n.taskDiv {\n  margin-bottom: 20px;\n}\n",""])},845:function(n,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"home-main"},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"24"}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"cube"}}),n._v("\n                月度绩效统计表 ( "+n._s(n.date)+" )\n            ")],1),n._v(" "),a("Select",{staticStyle:{width:"160px",float:"right","margin-top":"-50px"},attrs:{placeholder:"搜索项目名称",size:"small"},on:{"on-change":n.selectTask},model:{value:n.task,callback:function(t){n.task=t},expression:"task"}},[a("Option",{attrs:{value:"-1"}},[n._v("全部项目")]),n._v(" "),n._l(n.tasks,function(t){return a("Option",{attrs:{value:t.task_id}},[n._v(n._s(n.taskNames[t.task_id]))])})],2),n._v(" "),a("Button",{staticClass:"button",staticStyle:{top:"10px",position:"absolute",left:"250px"},attrs:{type:n.type?"primary":"ghost",shape:"circle"},on:{click:n.routeType}},[n._v("按项目查看")]),n._v(" "),a("Button",{staticClass:"button",staticStyle:{top:"10px",position:"absolute",left:"350px"},attrs:{type:n.type?"ghost":"primary",shape:"circle"},on:{click:n.routeType}},[n._v("按员工查看")]),n._v(" "),a("Dropdown",{staticStyle:{top:"10px",position:"absolute",left:"600px"},on:{"on-click":n.excelNoteMark}},[a("Button",{attrs:{type:"success"}},[n._v("\n                    导出Excel\n                    "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),n._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"mark"}},[n._v("考核分数表")]),n._v(" "),a("DropdownItem",{attrs:{name:"staff"}},[n._v("组织关系表")])],1)],1),n._v(" "),n._l(n.tasks,function(t){return t.is_task?n._e():a("div",{staticClass:"taskDiv"},[a("h4",{staticClass:"title"},[a("span",[n._v(n._s(n.taskNames[t.task_id]))]),n._v(" "),a("span",[n._v("( "+n._s(n.users[t.tasks.responsible])+" )")])]),n._v(" "),a("div",{staticClass:"details"},n._l(n.markRange,function(e){return a("div",{staticClass:"detailsRange"},[a("span",{staticClass:"markRange",class:e.active},[n._v(n._s(e.appraise))]),n._v(" "),n._l(e.staffs[t.task_id],function(t){return t&&n.staffs[t.staff_id]?a("span",{staticClass:"span"},[a("span",[n._v(n._s(n.staffs[t.staff_id]))]),n._v(" "),t.is_mark?a("span",[n._v(" ( "+n._s(t.mark)+" )")]):n._e()]):n._e()})],2)}))])})],2)],1)],1)],1)},i=[];e._withStripped=!0;var s={render:e,staticRenderFns:i};t.default=s}});