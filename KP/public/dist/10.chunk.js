webpackJsonp([10],{1002:function(e,t,n){var o=n(1003);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(15)("5c1e2761",o,!1,{})},1003:function(e,t,n){t=e.exports=n(14)(!1),t.push([e.i,"\n.user-infor {\n  height: 135px;\n}\n.avator-img {\n  display: block;\n  width: 80%;\n  max-width: 100px;\n  height: auto;\n}\n.card-user-infor-name {\n  font-size: 2em;\n  color: #2d8cf0;\n}\n.card-title {\n  color: #abafbd;\n}\n.made-child-con-middle {\n  height: 100%;\n}\n.to-do-list-con {\n  height: 145px;\n  overflow: auto;\n}\n.to-do-item {\n  padding: 2px;\n}\n.infor-card-con {\n  height: 100px;\n}\n.infor-card-icon-con {\n  height: 100%;\n  color: white;\n  border-radius: 3px 0 0 3px;\n}\n.map-con {\n  height: 305px;\n}\n.map-incon {\n  height: 100%;\n}\n.data-source-row {\n  height: 200px;\n}\n.line-chart-con {\n  height: 150px;\n}\n.ivu-collapse {\n  background-color: #f7f7f7;\n  border-radius: 3px;\n  border: none;\n  margin-bottom: 10px;\n}\n.ivu-collapse > .ivu-collapse-item {\n  border: none;\n}\n.depart-header {\n  background-color: #f7f7f7;\n  margin-bottom: 10px;\n  height: 40px;\n  line-height: 40px;\n  padding-left: 30px;\n  color: #333333;\n  font-size: 16px;\n  position: relative;\n}\n.depart-header .button {\n  position: absolute;\n  right: 10px;\n  top: 5px;\n}\n.right {\n  float: right;\n  margin: 5px 10px 0 0 ;\n}\n.small_right {\n  float: right;\n  margin: 8px 10px 0 0 ;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n",""])},1004:function(e,t,n){"use strict";function o(e){d||n(1005)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(480),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);var a=n(1007),l=n.n(a),d=!1,c=n(1),u=o,p=c(r.a,l.a,!1,u,null,null);p.options.__file="src\\views\\system\\role\\components\\rename.vue",t.default=p.exports},1005:function(e,t,n){var o=n(1006);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(15)("36298aa6",o,!1,{})},1006:function(e,t,n){t=e.exports=n(14)(!1),t.push([e.i,"",""])},1007:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Modal",{attrs:{title:"修改角色名称"},on:{"on-ok":function(t){e.ok("formData")},"on-cancel":e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("Form",{ref:"formData",attrs:{model:e.formData,"label-width":100,rules:e.formInline}},[n("FormItem",{attrs:{label:"角色名：",prop:"role"}},[n("Input",{staticStyle:{width:"80%"},attrs:{type:"text",placeholder:"请输入角色名"},model:{value:e.formData.role,callback:function(t){e.$set(e.formData,"role",t)},expression:"formData.role"}})],1)],1)],1)],1)},i=[];o._withStripped=!0;var r={render:o,staticRenderFns:i};t.default=r},1008:function(e,t,n){"use strict";function o(e){d||n(1009)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(481),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);var a=n(1011),l=n.n(a),d=!1,c=n(1),u=o,p=c(r.a,l.a,!1,u,null,null);p.options.__file="src\\views\\system\\role\\components\\primary-button.vue",t.default=p.exports},1009:function(e,t,n){var o=n(1010);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(15)("3a93c8c1",o,!1,{})},1010:function(e,t,n){t=e.exports=n(14)(!1),t.push([e.i,"\n.user-infor {\n  height: 135px;\n}\n.avator-img {\n  display: block;\n  width: 80%;\n  max-width: 100px;\n  height: auto;\n}\n.card-user-infor-name {\n  font-size: 2em;\n  color: #2d8cf0;\n}\n.card-title {\n  color: #abafbd;\n}\n.made-child-con-middle {\n  height: 100%;\n}\n.to-do-list-con {\n  height: 145px;\n  overflow: auto;\n}\n.to-do-item {\n  padding: 2px;\n}\n.infor-card-con {\n  height: 100px;\n}\n.infor-card-icon-con {\n  height: 100%;\n  color: white;\n  border-radius: 3px 0 0 3px;\n}\n.map-con {\n  height: 305px;\n}\n.map-incon {\n  height: 100%;\n}\n.data-source-row {\n  height: 200px;\n}\n.line-chart-con {\n  height: 150px;\n}\n.ivu-collapse {\n  background-color: #f7f7f7;\n  border-radius: 3px;\n  border: none;\n  margin-bottom: 10px;\n}\n.ivu-collapse > .ivu-collapse-item {\n  border: none;\n}\n.depart-header {\n  background-color: #f7f7f7;\n  margin-bottom: 10px;\n  height: 40px;\n  line-height: 40px;\n  padding-left: 30px;\n  color: #333333;\n  font-size: 16px;\n  position: relative;\n}\n.depart-header .button {\n  position: absolute;\n  right: 10px;\n  top: 5px;\n}\n.right {\n  float: right;\n  margin: 5px 10px 0 0 ;\n}\n.small_right {\n  float: right;\n  margin: 8px 10px 0 0 ;\n}\n",""])},1011:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{float:"right"}},[n("Button",{directives:[{name:"permission",rawName:"v-permission",value:["system-role-delete"],expression:"['system-role-delete']"}],staticClass:"right",attrs:{type:"ghost"},on:{click:function(e){e.stopPropagation()}}},[n("Poptip",{attrs:{confirm:"",title:"您确认删除此角色吗？",transfer:!0},on:{"on-ok":function(t){e.depart_delete(e.item.id)}}},[e._v("\n            删除\n        ")])],1),e._v(" "),"人事"!==e.item.role&&"总经理"!==e.item.role?n("Button",{directives:[{name:"permission",rawName:"v-permission",value:["system-role-rename"],expression:"['system-role-rename']"}],staticClass:"right",attrs:{type:"ghost"},on:{click:function(t){t.stopPropagation(),e.role_rename(e.item.id,e.item.role)}}},[e._v("重命名")]):e._e(),e._v(" "),n("Button",{directives:[{name:"permission",rawName:"v-permission",value:["system-role-set"],expression:"['system-role-set']"}],staticClass:"right",attrs:{type:"ghost"},on:{click:function(t){t.stopPropagation(),e.role_permission(e.item.id)}}},[e._v("权限分配")]),e._v(" "),n("Button",{directives:[{name:"permission",rawName:"v-permission",value:["system-role-detail"],expression:"['system-role-detail']"}],staticClass:"right",attrs:{type:"ghost"},on:{click:function(t){t.stopPropagation(),e.role_watch(e.item.id)}}},[e._v("权限详情")])],1)},i=[];o._withStripped=!0;var r={render:o,staticRenderFns:i};t.default=r},1012:function(e,t,n){"use strict";function o(e){d||n(1013)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(482),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);var a=n(1015),l=n.n(a),d=!1,c=n(1),u=o,p=c(r.a,l.a,!1,u,null,null);p.options.__file="src\\views\\system\\role\\components\\add-role.vue",t.default=p.exports},1013:function(e,t,n){var o=n(1014);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(15)("663f363f",o,!1,{})},1014:function(e,t,n){t=e.exports=n(14)(!1),t.push([e.i,"",""])},1015:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Modal",{attrs:{title:"新增管理员",loading:e.loading},on:{"on-ok":function(t){e.ok("formData")}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("Form",{ref:"formData",attrs:{model:e.formData,"label-width":100,rules:e.formInline}},[n("FormItem",{attrs:{label:"角色名：",prop:"role"}},[n("Input",{staticStyle:{width:"80%"},attrs:{type:"text",placeholder:"请输入角色名"},model:{value:e.formData.role,callback:function(t){e.$set(e.formData,"role",t)},expression:"formData.role"}})],1)],1)],1)],1)},i=[];o._withStripped=!0;var r={render:o,staticRenderFns:i};t.default=r},1016:function(e,t,n){"use strict";function o(e){d||n(1017)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(483),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);var a=n(1019),l=n.n(a),d=!1,c=n(1),u=o,p=c(r.a,l.a,!1,u,null,null);p.options.__file="src\\views\\system\\role\\components\\watch-permission.vue",t.default=p.exports},1017:function(e,t,n){var o=n(1018);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(15)("1c78b5db",o,!1,{})},1018:function(e,t,n){t=e.exports=n(14)(!1),t.push([e.i,"",""])},1019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Modal",{attrs:{title:e.title,width:"400",styles:{top:"20px"}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("Form",{ref:"formData",staticStyle:{"padding-left":"10%"},attrs:{model:e.formData,"label-width":100}},[n("Tree",{ref:"tree",attrs:{data:e.permissions,"show-checkbox":""}})],1),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},i=[];o._withStripped=!0;var r={render:o,staticRenderFns:i};t.default=r},1020:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home-main"},[n("Row",{attrs:{gutter:10}},[n("Col",{attrs:{span:"24"}},[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"cube"}}),e._v("\n                权限设置\n            ")],1),e._v(" "),n("Button",{directives:[{name:"permission",rawName:"v-permission",value:["system-role-add"],expression:"['system-role-add']"}],staticClass:"button",staticStyle:{top:"10px",position:"absolute",right:"10px"},attrs:{type:"primary",shape:"circle"},on:{click:e.addRole}},[e._v("+创建新角色")]),e._v(" "),n("Row",e._l(e.roles,function(t,o){return n("Collapse",{attrs:{accordion:""},model:{value:e.isShow[o],callback:function(t){e.$set(e.isShow,o,t)},expression:"isShow[index]"}},[n("div",{staticClass:"ivu-collapse"},[n("div",{staticClass:"ivu-collapse-item"},[n("div",{staticClass:"ivu-collapse-header"},[n("span",[e._v(e._s(t.role))]),e._v(" "),"系统管理员"!==t.role?n("primary-button",{attrs:{item:t},on:{role_rename:e.role_rename,role_delete:e.role_delete,role_permission:e.role_permission,role_watch:e.role_watch}}):e._e()],1),e._v(" "),n("div",{staticClass:"ivu-collapse-content",staticStyle:{display:"none"}},[n("div",{staticClass:"ivu-collapse-content-box"})])])])])}))],1)],1)],1),e._v(" "),n("add-role",{attrs:{addModel:e.addModel},on:{afresh_list:e.afresh_list}}),e._v(" "),n("rename",{attrs:{renameModel:e.renameModel,name:e.name,role_id:e.role_id},on:{afresh_list:e.afresh_list}}),e._v(" "),n("watch-permission",{attrs:{permissionModel:e.permissionModel,role_id:e.role_id},on:{afresh_list:e.afresh_list}})],1)},i=[];o._withStripped=!0;var r={render:o,staticRenderFns:i};t.default=r},242:function(e,t,n){"use strict";function o(e){d||n(1002)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(479),r=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);var a=n(1020),l=n.n(a),d=!1,c=n(1),u=o,p=c(r.a,l.a,!1,u,null,null);p.options.__file="src\\views\\system\\role\\index.vue",t.default=p.exports},479:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1004),r=o(i),s=n(1008),a=o(s),l=n(1012),d=o(l),c=n(1016),u=o(c);t.default={data:function(){return{isShow:[],roles:{},addModel:!1,renameModel:!1,permissionModel:!1,transfer:!0,role_id:0,name:""}},components:{Rename:r.default,PrimaryButton:a.default,AddRole:d.default,WatchPermission:u.default},methods:{addRole:function(){this.addModel=!this.addModel},init:function(){var e=this;this.JAjax.postJson("role/list",{},function(t){e.roles=t.data||{}})},afresh_list:function(){this.init()},role_watch:function(e){this.role_id=e,this.permissionModel=!this.permissionModel},role_delete:function(e){var t=this;this.JAjax.postJson("role/delete/"+e,{},function(e){t.$Message.success(e.message),t.init()})},role_rename:function(e,t){this.role_id=e,this.name=t,this.renameModel=!this.renameModel},role_permission:function(e){this.role_id=e,this.permissionModel=!this.permissionModel}},mounted:function(){this.init()}}},480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{formData:{role:""},formInline:{role:[{required:!0,message:"请输入角色名",trigger:"blur"}]},show:!1,loading:!0}},props:{renameModel:!1,role_id:0,name:""},methods:{ok:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.JAjax.postJson("role/rename/"+t.role_id,t.formData,function(e){1===e.code&&(t.$Message.success(e.message),t.formData.role="",t.$emit("afresh_list","data"))}),setTimeout(function(){t.show=!1},500)):(t.loading=!1,setTimeout(function(){t.loading=!0},100),t.$Message.error("请检查您输入的信息"))})},cancel:function(){}},watch:{renameModel:function(){this.show=!0},name:function(){this.formData.role=this.name}}}},481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{formData:{depart:""},depart_id:0}},props:{item:{}},methods:{role_watch:function(e){this.$emit("role_watch",e)},depart_delete:function(e){this.$emit("role_delete",e)},role_rename:function(e,t){this.$emit("role_rename",e,t)},role_permission:function(e){this.$router.push({name:"set_permission",query:{id:e}})}},watch:{}}},482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{formData:{role:""},formInline:{role:[{required:!0,message:"请输入角色名",trigger:"blur"}]},show:!1,loading:!0}},props:{addModel:!1},created:function(){},methods:{ok:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.JAjax.postJson("role/add",t.formData,function(e){1===e.code&&(t.$Message.success(e.message),t.formData.role="",t.$emit("afresh_list","data"))}),setTimeout(function(){t.show=!1},500)):(t.loading=!1,setTimeout(function(){t.loading=!0},100),t.$Message.error("请检查您输入的信息"))})},cancel:function(){}},watch:{addModel:function(){this.show=!0}}}},483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{formData:{route:[],child_route:[],use_route:[]},show:!1,role:"",pages:[],childPages:[],uses:[],permissions:[],title:"查看权限"}},props:{permissionModel:!1,role_id:0},created:function(){},methods:{getPermssions:function(){var e=this;this.JAjax.postJson("role/permissions",{},function(t){e.permissions=t.data,e.permissions.forEach(function(t){-1!==e.pages.indexOf(t.id)&&(t.checked=!0),t.children.forEach(function(t){-1!==e.childPages.indexOf(t.id)&&(t.checked=!0),t.children.forEach(function(t){-1!==e.uses.indexOf(t.id)&&(t.checked=!0)})})})})},getTheRolePermission:function(){var e=this;this.JAjax.postJson("role/permissions/"+this.role_id,{},function(t){e.title="查看权限（ "+t.data.role+" ）",e.pages=t.data.pages.map(function(e){return e.id}),e.childPages=t.data.child_pages.map(function(e){return e.id}),e.uses=t.data.uses.map(function(e){return e.id}),e.getPermssions()})}},watch:{permissionModel:function(){this.show=!0,this.getTheRolePermission()}}}}});